<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Tablarasa : Tabla composition generator in Ruby.">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Tablarasa</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/ThunderHeavyIndustries/TablaRasa">View on GitHub</a>

          <h1 id="project_title">Tablarasa</h1>
          <h2 id="project_tagline">Tabla composition generator in Ruby.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/ThunderHeavyIndustries/TablaRasa/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/ThunderHeavyIndustries/TablaRasa/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="tablarasa" class="anchor" href="#tablarasa" aria-hidden="true"><span class="octicon octicon-link"></span></a>TablaRasa</h1>

<h2>
<a id="description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h2>

<p>Ruby code for creating <a href="http://en.wikipedia.org/wiki/Tabla">tabla</a> compositions, for practice or performance. There are also tools that allow for markov analysis of tabla compositions as well as creating new compositions based on the Markov analysis of other works. The quickest way to get started is to check out the "TablaRasa_usage_examples.rb" file. By uncommenting certain chunks you can see usage examples for each bit of functionality to help you get started quicker. The methods are arranged by file into analyzing, generating, usage examples, and read/write functionality.</p>

<h2>
<a id="dependancies-you-will-need-these-for-some-methods-to-work" class="anchor" href="#dependancies-you-will-need-these-for-some-methods-to-work" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependancies, you will need these for some methods to work:</h2>

<ul>
<li><a href="http://www.graphviz.org/">graphviz</a></li>
<li><a href="http://www.imagemagick.org/">Imagemagick</a></li>
<li><a href="https://github.com/topfunky/gruff">gruff</a></li>
<li><a href="https://github.com/glejeune/Ruby-Graphviz/">ruby-graphviz</a></li>
<li><a href="https://github.com/rmagick/rmagick">rmagick</a></li>
</ul>

<h2>
<a id="in-progress" class="anchor" href="#in-progress" aria-hidden="true"><span class="octicon octicon-link"></span></a>In progress</h2>

<ul>
<li>Create graph output for time dependant XYZ plane graphing</li>
<li>Include midi support for computer performance of generated compositions</li>
<li>Add matra divisions to markov compositions</li>
</ul>

<h2>
<a id="some-terminology" class="anchor" href="#some-terminology" aria-hidden="true"><span class="octicon octicon-link"></span></a>Some Terminology</h2>

<p>For the names of the bols I'm following the framework as set up by Aloke Dutta <a href="http://www.alokedutta.com/product/tabla-lessons-and-practice/">as outlined in this book</a>. Here are some other terms that might be of use if one is unfamiliar with north Indian music:</p>

<p><a href="http://en.wikipedia.org/wiki/Bol_%28music%29">bols</a>,
<a href="http://en.wikipedia.org/wiki/Matra_(music)">matras</a></p>

<h2>
<a id="method-breakdown" class="anchor" href="#method-breakdown" aria-hidden="true"><span class="octicon octicon-link"></span></a>Method breakdown</h2>

<h3>
<a id="tabla_composition_generator" class="anchor" href="#tabla_composition_generator" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tabla_composition_generator</h3>

<p>In the tabla_composition_generator.rb file there a few options for constructing a composition.</p>

<p>"gen_string_of_hits" can get passed an integer, and it will return a string of random bols as long as the integer passed to it:</p>

<div class="highlight highlight-Ruby"><pre> gen_string_of_hits numberofhits

 gen_string_of_hits <span class="pl-c1">5</span>
 =&gt;  <span class="pl-c1">Te</span> <span class="pl-c1">Dha3</span> <span class="pl-c1">Ge</span> <span class="pl-c1">Tun</span> <span class="pl-c1">Re</span></pre></div>

<p>"gen_equal_subdivision" will return a string of length "numberofhits" with equal subdivisions set by "matradiv" </p>

<div class="highlight highlight-Ruby"><pre>gen_equal_subdivision numberofhits, matradiv

gen_equal_subdivision <span class="pl-c1">10</span>, <span class="pl-c1">5</span>
 =&gt;   <span class="pl-k">|</span> <span class="pl-c1">Dhet</span> <span class="pl-c1">Re</span> <span class="pl-c1">Te</span> <span class="pl-c1">Dhi</span> <span class="pl-c1">Tin</span> <span class="pl-k">|</span> <span class="pl-c1">Tun</span> <span class="pl-c1">Dha</span> <span class="pl-c1">Din</span> <span class="pl-c1">Te</span> <span class="pl-c1">Ta</span><span class="pl-k">|</span></pre></div>

<p>"gen_multi_subdivison" will return a string of length "numberofhits" with alternating subdivisions "sub1" and "sub2"</p>

<div class="highlight highlight-Ruby"><pre>gen_multi_subdivison numberofhits, sub1, sub2

gen_multi_subdivison <span class="pl-c1">10</span>, <span class="pl-c1">2</span>, <span class="pl-c1">3</span>
=&gt; <span class="pl-k">|</span>  <span class="pl-c1">Ka</span>  <span class="pl-c1">Din</span>  <span class="pl-k">|</span>  <span class="pl-c1">Tin</span>  <span class="pl-c1">Dha3</span>  <span class="pl-c1">Ka</span>  <span class="pl-k">|</span>  <span class="pl-c1">Te</span>  <span class="pl-c1">The2</span>  <span class="pl-k">|</span>  <span class="pl-c1">Ta</span>  <span class="pl-c1">The</span>  <span class="pl-c1">The2</span>  <span class="pl-k">|</span></pre></div>

<p>"gen_markov_comp" will return a string of "desired_output_length" based on a Markov analysis of depth "markov_depth" of the "composition" passed. </p>

<div class="highlight highlight-Ruby"><pre>gen_markov_comp composition, desired_output_length, markov_depth

gen_markov_comp <span class="pl-s"><span class="pl-pds">"</span>My_comp.txt<span class="pl-pds">"</span></span>, <span class="pl-c1">10</span>, <span class="pl-c1">2</span>
=&gt;  <span class="pl-c1">Te</span> <span class="pl-c1">Dha3</span> <span class="pl-c1">Ge</span> <span class="pl-c1">Tun</span> <span class="pl-c1">Re</span> <span class="pl-c1">Dhet</span> <span class="pl-c1">Re</span> <span class="pl-c1">Te</span> <span class="pl-c1">Dhi</span> <span class="pl-c1">Tin</span></pre></div>

<h3>
<a id="tabla_comp_analyzer" class="anchor" href="#tabla_comp_analyzer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tabla_comp_analyzer</h3>

<p>"analyze_composition" will return a hash that contains either the number of times a given bol occurs in a composition (bol_count), or the frequency (bol_freq) of each hit in the composition. If 1 is passed to both num, and frequency it will return both, with number of hits first, then frequency.</p>

<div class="highlight highlight-Ruby"><pre> analyze_composition composition_file, return_number_of_hits, return_frequency_of_hits 

 analyze_composition <span class="pl-s"><span class="pl-pds">"</span>My_File.txt<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>, <span class="pl-c1">0</span> 
 =&gt; bol_count
 bol_count[<span class="pl-s"><span class="pl-pds">"</span>Ta<span class="pl-pds">"</span></span>]=&gt; <span class="pl-c1">15</span>

  analyze_composition <span class="pl-s"><span class="pl-pds">"</span>My_File.txt<span class="pl-pds">"</span></span>, <span class="pl-c1">0</span>, <span class="pl-c1">1</span> 
 =&gt; bol_freq
 bol_freq[<span class="pl-s"><span class="pl-pds">"</span>Ta<span class="pl-pds">"</span></span>]=&gt; <span class="pl-c1">0.05</span>

  analyze_composition <span class="pl-s"><span class="pl-pds">"</span>My_File.txt<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>, <span class="pl-c1">1</span> 
 =&gt; bol_count
 =&gt; bol_freq</pre></div>

<p>"markov_analysis" will do a Markov analysis of a composition of the depth of your choosing. It returns a hash of hashes (bol_hash_hash) containing the percentage of times a given bol is followed by any of the others. In bol_hash_hash the first value passed is the bol you want the values for, the next value passed will return a float giving the percentage of the time that the first bol is followed by the second bol.</p>

<div class="highlight highlight-Ruby"><pre>markov_analysis composition_file, depth

markov_analysis <span class="pl-s"><span class="pl-pds">"</span>My_file.txt<span class="pl-pds">"</span></span>, <span class="pl-c1">1</span>
=&gt; bol_hash_hash

bol_hash_hash[<span class="pl-s"><span class="pl-pds">"</span>Ta<span class="pl-pds">"</span></span>][<span class="pl-s"><span class="pl-pds">"</span>Tin<span class="pl-pds">"</span></span>]=&gt; <span class="pl-c1">0.13</span>


markov_analysis <span class="pl-s"><span class="pl-pds">"</span>My_file.txt<span class="pl-pds">"</span></span>, <span class="pl-c1">2</span>
=&gt; bol_hash_hash

bol_hash_hash[<span class="pl-s"><span class="pl-pds">"</span>Ta<span class="pl-pds">"</span></span>][<span class="pl-s"><span class="pl-pds">"</span>Tin Da<span class="pl-pds">"</span></span>]=&gt; <span class="pl-c1">0.03</span></pre></div>

<p>"comp_graph" will output a .png file graph of the Markov values returned by the markov analyzer. The second parameter passed will be the name of the output .png file. The value passed to bol should be a bol from @<a href="https://github.com/bol" class="user-mention">@bol</a>, this will be the bol for which all the values will be calculated in the graph. If it's left empty (ie: "") a random bol will be chosen on which to base the graph. "graph_type" will determine the output style, either a top down, or radial style.</p>

<div class="highlight highlight-Ruby"><pre>comp_graph composition_file, output_name, bol, graph_type

comp_graph <span class="pl-s"><span class="pl-pds">"</span>My_file.txt<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>My_save_file<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>Dha<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>circular<span class="pl-pds">"</span></span>
=&gt; <span class="pl-c1">My_save_file</span>.png

comp_graph <span class="pl-s"><span class="pl-pds">"</span>My_file.txt<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>My_save_file<span class="pl-pds">"</span></span> <span class="pl-s"><span class="pl-pds">"</span>Dha<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span> straight<span class="pl-pds">"</span></span>
=&gt; <span class="pl-c1">My_save_file</span>.png
</pre></div>

<p>"total_composition_graph" will output a .png graph of the entire composition. graph_output_type is an integer that corresponds to an entry in the following array: ["circo","dot","fdp","neato","twopi"]. If no string is passed to output_name, then it will not create a .png but you can still get the graph theory output. Theory output is turned on an off by passing true, or false to theory</p>

<div class="highlight highlight-Ruby"><pre>total_composition_graph composition_file, output_name, theory, graph_output_type

total_composition_graph <span class="pl-s"><span class="pl-pds">"</span>My_composition<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>My_graph<span class="pl-pds">"</span></span>, <span class="pl-c1">true</span>, <span class="pl-c1">2</span>
=&gt; <span class="pl-c1">My_graph</span>.png
=&gt; <span class="pl-s"><span class="pl-pds">"</span>graph theory analysis results output to the command line...<span class="pl-pds">"</span></span>

total_composition_graph <span class="pl-s"><span class="pl-pds">"</span>My_composition<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>My_graph<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>, <span class="pl-c1">2</span>
=&gt; <span class="pl-c1">My_graph</span>.png</pre></div>

<p>"charts" will output .png bar charts of the data you pass them. Data should be passed as an array of arrays. I highly suggest using "analyze_composition" to create your data. So if you want one compositions chart, Array = [[data]]. If you want to analyze multiple compositions against themselves you can do so by adding more to the array:  Array = [[data1], [data2],..., [data_n]]. Title is just a string.</p>

<div class="highlight highlight-Ruby"><pre>charts data_array, chart_title

charts my_array, <span class="pl-s"><span class="pl-pds">"</span>My_chart<span class="pl-pds">"</span></span>
=&gt; <span class="pl-c1">My_chart</span>.png</pre></div>

<h2>
<a id="graph-example" class="anchor" href="#graph-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Graph Example</h2>

<p>These are examples of the graph output using <a href="https://github.com/glejeune/Ruby-Graphviz/">Ruby-Graphiz</a>. The first is the circular output, the second the straight output.</p>

<p><img src="http://i.imgur.com/jA39HaC.png" alt="Circular Graph" title="Circular Graph output Example"></p>

<p><img src="http://i.imgur.com/AuPdtFE.png" alt="LR Graph" title="Left to right output Example"></p>

<h2>
<a id="chart-example" class="anchor" href="#chart-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Chart Example</h2>

<p>These are examples of the chart output using <a href="https://github.com/topfunky/gruff">gruff</a>. The first is the total hits, the second is the percentage output for 3 random markov compositions derived from the same base composition.</p>

<p><img src="http://i.imgur.com/5vgPwmt.png" alt="number of hits" title="Number of hits">
<img src="http://i.imgur.com/on5YbOB.png" alt="percentage of total hits" title="Percentages of hits"></p>

<p>{TablaRasa}
    Copyright (C) {2015}  {Trace Norris}</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Tablarasa maintained by <a href="https://github.com/ThunderHeavyIndustries">ThunderHeavyIndustries</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
